{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../api-call.service\";\nimport * as i2 from \"../login.service\";\nimport * as i3 from \"@angular/router\";\nexport let ReportAPIComponent = /*#__PURE__*/(() => {\n  class ReportAPIComponent {\n    constructor(ApiCallService, LoginService, router) {\n      this.ApiCallService = ApiCallService;\n      this.LoginService = LoginService;\n      this.router = router;\n      this.userOn = false;\n      this.response1 = '';\n      this.response2 = '';\n      this.title = '';\n      this.reportData = '';\n      this.token = '';\n    }\n    // Check if a user is online\n    // Get token\n    ngOnInit() {\n      this.userOnline();\n      this.route4();\n    }\n    // If no user online transfer to login\n    userOnline() {\n      console.log('Checking if the user is online');\n      var testU;\n      testU = this.LoginService.getUserOn();\n      if (testU) {\n        this.userOn = true;\n        this.response1 = 'Access by user';\n        return;\n      }\n      this.response1 = 'No-Access, no user';\n      this.router.navigate(['login']);\n      console.log('User online:' + this.userOn);\n    }\n    // CALLBACKS\n    // Get response data\n    callback(thisObj, res, result) {\n      console.log(result);\n      thisObj.reponse2 = result.data.msg;\n      if (result.data.data[0] == undefined) {\n        console.log(\"No data\");\n        thisObj.title = 'No data';\n        thisObj.reportData = '';\n        return;\n      }\n      thisObj.title = result.data.data[0].title;\n      thisObj.reportData = result.data.data[0].data;\n      result.data.data[0].data;\n    }\n    // Set the token \n    callback2(thisObj, res, result) {\n      console.log('Setting the token:' + result.data.token);\n      thisObj.token = result.data.token;\n    }\n    // Register a text & edit a text\n    callback3(thisObj, res, result) {\n      console.log('Callback3');\n      console.log(result);\n      if (result.data != undefined) {\n        if (result.data.msg != undefined) {\n          thisObj.response2 = result.data.msg;\n          thisObj.router.navigate(['seeReports']);\n        }\n      }\n      if (result.error != undefined) {\n        thisObj.response2 = result.error;\n        thisObj.response2 = 'Not completed, duplicate title?';\n      }\n    }\n    // Register a text & edit a text\n    callback4(thisObj, res, result) {\n      console.log('Callback4');\n      console.log(result);\n      if (result.data != undefined) {\n        if (result.data.msg != undefined) {\n          thisObj.response2 = result.data.msg;\n          // thisObj.router.navigate(['seeReports']);\n        }\n      }\n\n      if (result.error != undefined) {\n        thisObj.response2 = result.error;\n        thisObj.response2 = 'Not completed';\n      }\n    }\n    // ROUTES\n    // Display text from week nr\n    route1(weekNr) {\n      var url = 'https://me-api.ysojs.se/reports/week/' + weekNr;\n      var dataObj = {};\n      var token = null;\n      var obj1 = this;\n      this.reportData = '';\n      this.title = '';\n      this.response2 = '';\n      this.ApiCallService.fetchCall(dataObj, url, 'GET', this.callback, token, obj1);\n    }\n    // // Add data\n    // route2(title, data=null) {\n    //   console.log('Title:'+title);\n    //   console.log('Data:'+data);\n    //   this.response2 = '';\n    //   this.reportData = data;\n    //   this.title = title;\n    // }\n    // // Edit data\n    // route3(title, data=null, data2=null) {\n    //   console.log('Title:'+title);\n    //   console.log('Data:'+data);\n    //   console.log('Data:'+data2);\n    //   this.reportData = data;\n    //   this.title = title;\n    // }\n    // Get token\n    route4() {\n      console.log('Get token');\n      var url = \"https://me-api.ysojs.se/token\";\n      var dataObj = {};\n      var obj1 = this;\n      this.ApiCallService.fetchCall(dataObj, url, 'GET', this.callback2, null, obj1);\n    }\n    // Register a text\n    // registerText(title, text, token) {\n    //   var url = 'https://me-api.ysojs.se/reports/add';\n    //   var params;\n    //   params = {\"title\":title, \"data1\":text};\n    //   this.ApiCallService.fetchCall();\n    // }\n    // Register a text\n    route5(title, text, token = this.token) {\n      console.log('Add a text: ' + text + ' title: ' + title + ' token: ' + token);\n      var url = 'https://me-api.ysojs.se/reports/add';\n      var obj1 = this;\n      var params = {\n        \"title\": title,\n        \"data1\": text\n      };\n      this.response2 = ''; // Empty response text\n      this.ApiCallService.fetchCall(params, url, 'POST', this.callback3, token, obj1);\n    }\n    // Edit a text\n    route6(title, text, token = this.token) {\n      console.log('Add a text: ' + text + ' title: ' + title + ' token: ' + token);\n      var url = 'https://me-api.ysojs.se/reports/edit';\n      var obj1 = this;\n      var params = {\n        \"title\": title,\n        \"data1\": text\n      };\n      this.response2 = ''; // Empty response text\n      this.ApiCallService.fetchCall(params, url, 'POST', this.callback3, token, obj1);\n    }\n    // Delete a text\n    route7(title, token = this.token) {\n      console.log('Delete title: ' + title);\n      var url = 'https://me-api.ysojs.se/reports/delete';\n      var obj1 = this;\n      var params = {\n        \"title\": title\n      };\n      this.response2 = ''; // Empty response text\n      this.ApiCallService.fetchCall(params, url, 'POST', this.callback4, token, obj1);\n    }\n    static #_ = this.ɵfac = function ReportAPIComponent_Factory(t) {\n      return new (t || ReportAPIComponent)(i0.ɵɵdirectiveInject(i1.ApiCallService), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ReportAPIComponent,\n      selectors: [[\"app-report-api\"]],\n      decls: 44,\n      vars: 7,\n      consts: [[1, \"centerColumn\"], [1, \"theForm\"], [\"type\", \"number\", 1, \"input\"], [\"box1\", \"\"], [1, \"submitBtn\", 3, \"click\"], [1, \"reports\"], [\"type\", \"text\", 1, \"input\", 3, \"value\"], [\"input1\", \"\"], [\"id\", \"input2\", \"rows\", \"5\", \"cols\", \"30\", 3, \"value\"], [\"input2\", \"\"]],\n      template: function ReportAPIComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r3 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n          i0.ɵɵtext(2, \" Reports \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(3);\n          i0.ɵɵelementStart(4, \"div\", 1);\n          i0.ɵɵtext(5, \" Week: \");\n          i0.ɵɵelement(6, \"input\", 2, 3);\n          i0.ɵɵelementStart(8, \"div\", 4);\n          i0.ɵɵlistener(\"click\", function ReportAPIComponent_Template_div_click_8_listener() {\n            i0.ɵɵrestoreView(_r3);\n            const _r0 = i0.ɵɵreference(7);\n            return i0.ɵɵresetView(ctx.route1(_r0.value));\n          });\n          i0.ɵɵtext(9, \" Submit \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"h2\");\n          i0.ɵɵtext(11, \" Reports \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 5)(13, \"h3\");\n          i0.ɵɵtext(14, \"Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"p\");\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"h3\");\n          i0.ɵɵtext(18, \"ReportData\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"p\");\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(21, \"h3\");\n          i0.ɵɵtext(22, \" Edit / add \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 5);\n          i0.ɵɵtext(24, \" Title: \");\n          i0.ɵɵelement(25, \"input\", 6, 7)(27, \"br\");\n          i0.ɵɵtext(28, \" Text: \");\n          i0.ɵɵelementStart(29, \"textarea\", 8, 9);\n          i0.ɵɵtext(31);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(32, \"br\");\n          i0.ɵɵelementStart(33, \"div\", 4);\n          i0.ɵɵlistener(\"click\", function ReportAPIComponent_Template_div_click_33_listener() {\n            i0.ɵɵrestoreView(_r3);\n            const _r1 = i0.ɵɵreference(26);\n            const _r2 = i0.ɵɵreference(30);\n            return i0.ɵɵresetView(ctx.route5(_r1.value, _r2.value));\n          });\n          i0.ɵɵtext(34, \" Add \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"div\", 4);\n          i0.ɵɵlistener(\"click\", function ReportAPIComponent_Template_div_click_35_listener() {\n            i0.ɵɵrestoreView(_r3);\n            const _r1 = i0.ɵɵreference(26);\n            const _r2 = i0.ɵɵreference(30);\n            return i0.ɵɵresetView(ctx.route6(_r1.value, _r2.value));\n          });\n          i0.ɵɵtext(36, \" Edit \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"div\", 4);\n          i0.ɵɵlistener(\"click\", function ReportAPIComponent_Template_div_click_37_listener() {\n            i0.ɵɵrestoreView(_r3);\n            const _r1 = i0.ɵɵreference(26);\n            return i0.ɵɵresetView(ctx.route7(_r1.value));\n          });\n          i0.ɵɵtext(38, \" Delete \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(39, \"div\", 5)(40, \"h2\");\n          i0.ɵɵtext(41, \" Response \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"p\");\n          i0.ɵɵtext(43);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", ctx.response1, \" \");\n          i0.ɵɵadvance(13);\n          i0.ɵɵtextInterpolate1(\" \", ctx.title, \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(ctx.reportData);\n          i0.ɵɵadvance(5);\n          i0.ɵɵpropertyInterpolate(\"value\", ctx.title);\n          i0.ɵɵadvance(4);\n          i0.ɵɵpropertyInterpolate(\"value\", ctx.reportData);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.reportData);\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate(ctx.response2);\n        }\n      },\n      styles: [\".centerColumn[_ngcontent-%COMP%]{background-color:#708da4;width:100%;margin:0 auto;max-width:550px;padding:5%}.reports[_ngcontent-%COMP%]{clear:both;width:100%;padding-top:3%}.theForm[_ngcontent-%COMP%]{font-family:inherit;font-size:100%;width:80%;margin:0 auto;max-width:700px;list-style:none;padding:8%;text-align:center}.submitBtn[_ngcontent-%COMP%]{box-shadow:0 5px 5px #000000bf;-webkit-box-shadow:0px 5px 5px 0px rgba(0,0,0,.75);-moz-box-shadow:0px 5px 5px 0px rgba(0,0,0,.75);float:left;min-width:100px;margin:5% auto 0;background-color:#bbdbbb;color:#000;width:15%;padding:12px;letter-spacing:2px;text-transform:uppercase;border-radius:25px;cursor:pointer;text-align:center}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #708DA4;border-radius:4px;resize:vertical;outline:none}input[type=text][_ngcontent-%COMP%]:hover{background-color:#beddcf;outline:none}input[type=text][_ngcontent-%COMP%]:focus{background-color:#74ae95;border:1px solid #708DA4;outline:none}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}\"]\n    });\n  }\n  return ReportAPIComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}